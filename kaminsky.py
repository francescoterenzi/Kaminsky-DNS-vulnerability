# /bin/python3
import socket
from dnslib import DNSRecord
import time
import os

buffer_size = 1024
   
UDP_IP = "192.168.56.1"
UDP_PORT = 55553

DNS_IP = "192.168.56.101"
DNS_PORT = 53

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.bind((UDP_IP, UDP_PORT))

num = True

while num:
    os.system('dig @192.168.56.101 badguy.ru 1> /dev/null')
    
    packet, addr = sock.recvfrom(buffer_size)
    data = DNSRecord.parse(packet)
    quid = data.header.id
    print("received message with quid:", quid)


#MESSAGE = "Hello, World!"
#sock.sendto(MESSAGE, (UDP_IP, UDP_PORT))